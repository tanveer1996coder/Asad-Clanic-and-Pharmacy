"use strict";(self.webpackChunksupabase_sales_app=self.webpackChunksupabase_sales_app||[]).push([[887],{12110:(t,e,r)=>{r.d(e,{A:()=>x});var n=r(58168),o=r(98587),a=r(65043),i=r(58387),s=r(98610),l=r(34535),c=r(98206),u=r(63336),d=r(92532),p=r(72372);function y(t){return(0,p.Ay)("MuiCard",t)}(0,d.A)("MuiCard",["root"]);var h=r(70579);const f=["className","raised"],m=(0,l.Ay)(u.A,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),x=a.forwardRef(function(t,e){const r=(0,c.b)({props:t,name:"MuiCard"}),{className:a,raised:l=!1}=r,u=(0,o.A)(r,f),d=(0,n.A)({},r,{raised:l}),p=(t=>{const{classes:e}=t;return(0,s.A)({root:["root"]},y,e)})(d);return(0,h.jsx)(m,(0,n.A)({className:(0,i.A)(p.root,a),elevation:l?8:void 0,ref:e,ownerState:d},u))})},12807:(t,e,r)=>{function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PKR";if(null===t||void 0===t||isNaN(t))return"".concat(e," 0.00");const r=Number(t);return"".concat(e," ").concat(r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}function o(t){return null===t||void 0===t||isNaN(t)?"0":Number(t).toLocaleString("en-US")}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null===t||void 0===t||isNaN(t)?"0%":"".concat(Number(t).toFixed(e),"%")}r.d(e,{Ee:()=>a,ZV:()=>o,vv:()=>n})},17887:(t,e,r)=>{r.r(e),r.d(e,{default:()=>mt});var n=r(65043),o=r(73216),a=r(96446),i=r(81637),s=r(19252),l=r(85865),c=r(11906),u=r(77739),d=r(17392),p=r(68903),y=r(12110),h=r(26494),f=r(43845),m=r(17673),x=r(47805),v=r(99010),A=r(68970),g=r(34642),b=r(50108),j=r(88420),k=r(11744),w=r(11629),S=r.n(w),C=r(79686),_=r.n(C),O=r(19853),P=r.n(O),E=r(58387),D=r(68471),N=r(68892),I=r(71639),M=r(81519),L=r(38813),W=r(76307),T=r(240),R=r(6015),F=r(20202),V=["type","layout","connectNulls","ref"],z=["key"];function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function Z(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function K(){return K=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},K.apply(this,arguments)}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach(function(e){tt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function H(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return J(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,et(n.key),n)}}function G(t,e,r){return e=Q(e),function(t,e){if(e&&("object"===B(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$()?Reflect.construct(e,r||[],Q(t).constructor):e.apply(t,r))}function $(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return($=function(){return!!t})()}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function tt(t,e,r){return(e=et(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}var rt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return tt(t=G(this,e,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),tt(t,"generateSimpleStrokeDasharray",function(t,e){return"".concat(e,"px ").concat(t-e,"px")}),tt(t,"getStrokeDasharray",function(r,n,o){var a=o.reduce(function(t,e){return t+e});if(!a)return t.generateSimpleStrokeDasharray(n,r);for(var i=Math.floor(r/a),s=r%a,l=n-r,c=[],u=0,d=0;u<o.length;d+=o[u],++u)if(d+o[u]>s){c=[].concat(H(o.slice(0,u)),[s-d]);break}var p=c.length%2===0?[0,l]:[l];return[].concat(H(e.repeat(o,i)),H(c),p).map(function(t){return"".concat(t,"px")}).join(", ")}),tt(t,"id",(0,W.NF)("recharts-line-")),tt(t,"pathRef",function(e){t.mainCurve=e}),tt(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),tt(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(e,t),r=e,a=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curPoints:t.points,prevPoints:e.curPoints}:t.points!==e.curPoints?{curPoints:t.points}:null}},{key:"repeat",value:function(t,e){for(var r=t.length%2!==0?[].concat(H(t),[0]):t,n=[],o=0;o<e;++o)n=[].concat(H(n),H(r));return n}},{key:"renderDotItem",value:function(t,e){var r;if(n.isValidElement(t))r=n.cloneElement(t,e);else if(S()(t))r=t(e);else{var o=e.key,a=Z(e,z),i=(0,E.A)("recharts-line-dot","boolean"!==typeof t?t.className:"");r=n.createElement(N.c,K({key:o},a,{className:i}))}return r}}],(o=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();this.setState({totalLength:t})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();t!==this.state.totalLength&&this.setState({totalLength:t})}}},{key:"getTotalLength",value:function(){var t=this.mainCurve;try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch(e){return 0}}},{key:"renderErrorBar",value:function(t,e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,o=r.points,a=r.xAxis,i=r.yAxis,s=r.layout,l=r.children,c=(0,T.aS)(l,L.u);if(!c)return null;var u=function(t,e){return{x:t.x,y:t.y,value:t.value,errorVal:(0,F.kr)(t.payload,e)}},d={clipPath:t?"url(#clipPath-".concat(e,")"):null};return n.createElement(I.W,d,c.map(function(t){return n.cloneElement(t,{key:"bar-".concat(t.props.dataKey),data:o,xAxis:a,yAxis:i,layout:s,dataPointFormatter:u})}))}},{key:"renderDots",value:function(t,r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.dot,s=a.points,l=a.dataKey,c=(0,T.J9)(this.props,!1),u=(0,T.J9)(i,!0),d=s.map(function(t,r){var n=q(q(q({key:"dot-".concat(r),r:3},c),u),{},{index:r,cx:t.x,cy:t.y,value:t.value,dataKey:l,payload:t.payload,points:s});return e.renderDotItem(i,n)}),p={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(o,")"):null};return n.createElement(I.W,K({className:"recharts-line-dots",key:"dots"},p),d)}},{key:"renderCurveStatically",value:function(t,e,r,o){var a=this.props,i=a.type,s=a.layout,l=a.connectNulls,c=(a.ref,Z(a,V)),u=q(q(q({},(0,T.J9)(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:e?"url(#clipPath-".concat(r,")"):null,points:t},o),{},{type:i,layout:s,connectNulls:l});return n.createElement(D.I,K({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(t,e){var r=this,o=this.props,a=o.points,i=o.strokeDasharray,s=o.isAnimationActive,l=o.animationBegin,c=o.animationDuration,u=o.animationEasing,d=o.animationId,p=o.animateNewValues,y=o.width,h=o.height,f=this.state,m=f.prevPoints,x=f.totalLength;return n.createElement(k.Ay,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var o=n.t;if(m){var s=m.length/a.length,l=a.map(function(t,e){var r=Math.floor(e*s);if(m[r]){var n=m[r],a=(0,W.Dj)(n.x,t.x),i=(0,W.Dj)(n.y,t.y);return q(q({},t),{},{x:a(o),y:i(o)})}if(p){var l=(0,W.Dj)(2*y,t.x),c=(0,W.Dj)(h/2,t.y);return q(q({},t),{},{x:l(o),y:c(o)})}return q(q({},t),{},{x:t.x,y:t.y})});return r.renderCurveStatically(l,t,e)}var c,u=(0,W.Dj)(0,x)(o);if(i){var d="".concat(i).split(/[,\s]+/gim).map(function(t){return parseFloat(t)});c=r.getStrokeDasharray(u,x,d)}else c=r.generateSimpleStrokeDasharray(x,u);return r.renderCurveStatically(a,t,e,{strokeDasharray:c})})}},{key:"renderCurve",value:function(t,e){var r=this.props,n=r.points,o=r.isAnimationActive,a=this.state,i=a.prevPoints,s=a.totalLength;return o&&n&&n.length&&(!i&&s>0||!P()(i,n))?this.renderCurveWithAnimation(t,e):this.renderCurveStatically(n,t,e)}},{key:"render",value:function(){var t,e=this.props,r=e.hide,o=e.dot,a=e.points,i=e.className,s=e.xAxis,l=e.yAxis,c=e.top,u=e.left,d=e.width,p=e.height,y=e.isAnimationActive,h=e.id;if(r||!a||!a.length)return null;var f=this.state.isAnimationFinished,m=1===a.length,x=(0,E.A)("recharts-line",i),v=s&&s.allowDataOverflow,A=l&&l.allowDataOverflow,g=v||A,b=_()(h)?this.id:h,j=null!==(t=(0,T.J9)(o,!1))&&void 0!==t?t:{r:3,strokeWidth:2},k=j.r,w=void 0===k?3:k,S=j.strokeWidth,C=void 0===S?2:S,O=((0,T.sT)(o)?o:{}).clipDot,P=void 0===O||O,D=2*w+C;return n.createElement(I.W,{className:x},v||A?n.createElement("defs",null,n.createElement("clipPath",{id:"clipPath-".concat(b)},n.createElement("rect",{x:v?u:u-d/2,y:A?c:c-p/2,width:v?d:2*d,height:A?p:2*p})),!P&&n.createElement("clipPath",{id:"clipPath-dots-".concat(b)},n.createElement("rect",{x:u-D/2,y:c-D/2,width:d+D,height:p+D}))):null,!m&&this.renderCurve(g,b),this.renderErrorBar(g,b),(m||o)&&this.renderDots(g,P,b),(!y||f)&&M.Z.renderCallByParent(this.props,a))}}])&&Y(r.prototype,o),a&&Y(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.PureComponent);tt(rt,"displayName","Line"),tt(rt,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!R.m.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),tt(rt,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,i=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout;return q({points:l.map(function(t,e){var l=(0,F.kr)(t,i);return"horizontal"===u?{x:(0,F.nb)({axis:r,ticks:o,bandSize:s,entry:t,index:e}),y:_()(l)?null:n.scale(l),value:l,payload:t}:{x:_()(l)?null:r.scale(l),y:(0,F.nb)({axis:n,ticks:a,bandSize:s,entry:t,index:e}),value:l,payload:t}}),layout:u},c)});var nt=r(52185),ot=r(6026),at=r(3831),it=(0,j.gu)({chartName:"LineChart",GraphicalChild:rt,axisComponents:[{axisType:"xAxis",AxisComp:nt.W},{axisType:"yAxis",AxisComp:ot.h}],formatAxisMap:at.pr}),st=r(87734),lt=r(86150),ct=r(27001),ut=r(12807),dt=r(43243),pt=r(11737),yt=r(90990),ht=r(8649),ft=r(70579);function mt(){const{settings:t}=(0,pt.A)(),{toggleHelp:e}=(0,ht.d)(),r=(0,o.Zp)(),[j,k]=(0,n.useState)(!0),[w,S]=(0,n.useState)({todaySales:0,todayRevenue:0,lowStockCount:0,nearExpiryCount:0,totalProducts:0,totalStock:0}),[C,_]=(0,n.useState)([]),[O,P]=(0,n.useState)([]),[E,D]=(0,n.useState)([]),[N,I]=(0,n.useState)([]),M=(0,n.useCallback)(async()=>{k(!0);try{const e=parseInt((null===t||void 0===t?void 0:t.expiry_alert_days)||"15"),[r,n,o,a,i]=await Promise.all([ct.N.rpc("get_dashboard_stats",{expiry_days_threshold:e}),ct.N.rpc("get_sales_chart_data",{days_back:7}),ct.N.rpc("get_top_products",{limit_count:5,days_back:30}),ct.N.rpc("get_low_stock_products"),ct.N.rpc("get_near_expiry_products",{days_threshold:e})]);if(r.data&&r.data.length>0){const t=r.data[0];S({todaySales:t.today_sales_count,todayRevenue:t.today_revenue,lowStockCount:t.low_stock_count,nearExpiryCount:t.near_expiry_count,totalProducts:t.total_products_count,totalStock:t.total_stock_count})}else r.error&&console.error("Error fetching dashboard stats:",r.error);if(n.data){const t=n.data.map(t=>({date:(0,dt.Yq)(t.sale_date,"MMM dd"),revenue:t.daily_revenue}));_(t)}else n.error&&console.error("Error fetching sales chart:",n.error);P(o.data||[]),D((a.data||[]).slice(0,5)),I((i.data||[]).slice(0,5))}catch(e){console.error("Error in dashboard data fetch:",e)}finally{k(!1)}},[t]);return(0,yt.A)({"Alt+r":()=>M(),"Alt+n":()=>r("/sales"),"Alt+p":()=>r("/products"),"Shift+?":()=>{}},"Dashboard"),(0,n.useEffect)(()=>{M()},[M]),(0,n.useEffect)(()=>{const e=()=>{t&&M()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[t,M]),j?(0,ft.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:(0,ft.jsx)(i.A,{size:60})}):(0,ft.jsxs)(s.A,{maxWidth:"xl",children:[(0,ft.jsxs)(a.A,{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,mb:3,children:[(0,ft.jsx)(l.A,{variant:"h4",fontWeight:700,color:"primary",children:"Dashboard"}),(0,ft.jsxs)(a.A,{display:"flex",gap:1,children:[(0,ft.jsx)(c.A,{variant:"outlined",startIcon:(0,ft.jsx)(m.A,{}),onClick:e,size:"small",children:"Shortcuts"}),(0,ft.jsx)(u.A,{title:"Refresh (Alt+r)",children:(0,ft.jsx)(d.A,{onClick:M,color:"primary",children:(0,ft.jsx)(x.A,{})})})]})]}),(0,ft.jsxs)(p.Ay,{container:!0,spacing:3,mb:4,children:[(0,ft.jsx)(p.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,ft.jsx)(xt,{title:"Today's Sales",value:(0,ut.ZV)(w.todaySales),subtitle:(0,ut.vv)(w.todayRevenue,t.currency_symbol),icon:(0,ft.jsx)(v.A,{}),color:"primary",onClick:()=>r("/sales?date=".concat((new Date).toISOString().split("T")[0]))})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,ft.jsx)(xt,{title:"Total Products",value:(0,ut.ZV)(w.totalProducts),subtitle:"".concat((0,ut.ZV)(w.totalStock)," units in stock"),icon:(0,ft.jsx)(A.A,{}),color:"info",onClick:()=>r("/products")})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,ft.jsx)(xt,{title:"Low Stock Items",value:(0,ut.ZV)(w.lowStockCount),subtitle:"Need reordering",icon:(0,ft.jsx)(g.A,{}),color:"warning",alert:w.lowStockCount>0,onClick:()=>r("/reports?tab=2")})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,ft.jsx)(xt,{title:"Near Expiry",value:(0,ut.ZV)(w.nearExpiryCount),subtitle:"Within ".concat(t.expiry_alert_days||15," days"),icon:(0,ft.jsx)(g.A,{}),color:"error",alert:w.nearExpiryCount>0,onClick:()=>r("/reports?tab=1")})})]}),(0,ft.jsxs)(p.Ay,{container:!0,spacing:3,children:[(0,ft.jsx)(p.Ay,{item:!0,xs:12,lg:8,children:(0,ft.jsx)(y.A,{sx:{height:"100%"},children:(0,ft.jsxs)(h.A,{children:[(0,ft.jsx)(l.A,{variant:"h6",fontWeight:600,mb:2,children:"Sales Trend (Last 7 Days)"}),(0,ft.jsx)(b.u,{width:"100%",height:300,children:(0,ft.jsxs)(it,{data:C,children:[(0,ft.jsx)(st.d,{strokeDasharray:"3 3"}),(0,ft.jsx)(nt.W,{dataKey:"date"}),(0,ft.jsx)(ot.h,{}),(0,ft.jsx)(lt.m,{}),(0,ft.jsx)(rt,{type:"monotone",dataKey:"revenue",stroke:"#6366f1",strokeWidth:3})]})})]})})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,lg:4,children:(0,ft.jsx)(y.A,{sx:{height:"100%"},children:(0,ft.jsxs)(h.A,{children:[(0,ft.jsx)(l.A,{variant:"h6",fontWeight:600,mb:2,children:"Top Selling Products"}),0===O.length?(0,ft.jsx)(l.A,{color:"text.secondary",children:"No sales data yet"}):O.map((e,r)=>(0,ft.jsxs)(a.A,{mb:2,children:[(0,ft.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,ft.jsx)(l.A,{variant:"body2",fontWeight:600,children:e.product_name}),(0,ft.jsx)(f.A,{label:"".concat(e.total_quantity," sold"),size:"small",color:"primary"})]}),(0,ft.jsx)(l.A,{variant:"caption",color:"text.secondary",children:(0,ut.vv)(e.total_revenue,t.currency_symbol)})]},r))]})})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,ft.jsx)(y.A,{children:(0,ft.jsxs)(h.A,{children:[(0,ft.jsx)(l.A,{variant:"h6",fontWeight:600,mb:2,color:"warning.main",children:"Low Stock Alert"}),0===E.length?(0,ft.jsx)(l.A,{color:"text.secondary",children:"All products are well stocked!"}):E.map((t,e)=>(0,ft.jsx)(a.A,{mb:2,children:(0,ft.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,ft.jsx)(l.A,{variant:"body2",fontWeight:600,children:t.name}),(0,ft.jsx)(f.A,{label:"".concat(t.stock," / ").concat(t.min_stock_level),size:"small",color:0===t.stock?"error":"warning"})]})},e))]})})}),(0,ft.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,ft.jsx)(y.A,{children:(0,ft.jsxs)(h.A,{children:[(0,ft.jsx)(l.A,{variant:"h6",fontWeight:600,mb:2,color:"error.main",children:"Expiry Alert"}),0===N.length?(0,ft.jsx)(l.A,{color:"text.secondary",children:"No products near expiry!"}):N.map((e,r)=>{const n=(0,dt.go)(e.expiry_date,7,parseInt(t.expiry_alert_days||"15"));return(0,ft.jsxs)(a.A,{mb:2,children:[(0,ft.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,ft.jsx)(l.A,{variant:"body2",fontWeight:600,children:e.name}),(0,ft.jsx)(f.A,{label:n.label,size:"small",color:n.color})]}),(0,ft.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["Expires: ",(0,dt.Yq)(e.expiry_date)]})]},r)})]})})})]})]})}function xt(t){let{title:e,value:r,subtitle:n,icon:o,color:i,alert:s,onClick:c}=t;return(0,ft.jsx)(y.A,{onClick:c,sx:{background:s?"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",border:s?"2px solid #ef4444":"none",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:(0,ft.jsxs)(h.A,{children:[(0,ft.jsx)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:(0,ft.jsx)(a.A,{sx:{backgroundColor:"".concat(i,".main"),color:"white",borderRadius:2,p:1.5,display:"flex",alignItems:"center",justifyContent:"center"},children:o})}),(0,ft.jsx)(l.A,{variant:"h4",fontWeight:700,color:s?"error.main":"text.primary",children:r}),(0,ft.jsx)(l.A,{variant:"body2",color:"text.secondary",mt:.5,children:e}),(0,ft.jsx)(l.A,{variant:"caption",color:"text.secondary",children:n})]})})}},26494:(t,e,r)=>{r.d(e,{A:()=>m});var n=r(58168),o=r(98587),a=r(65043),i=r(58387),s=r(98610),l=r(34535),c=r(98206),u=r(92532),d=r(72372);function p(t){return(0,d.Ay)("MuiCardContent",t)}(0,u.A)("MuiCardContent",["root"]);var y=r(70579);const h=["className","component"],f=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),m=a.forwardRef(function(t,e){const r=(0,c.b)({props:t,name:"MuiCardContent"}),{className:a,component:l="div"}=r,u=(0,o.A)(r,h),d=(0,n.A)({},r,{component:l}),m=(t=>{const{classes:e}=t;return(0,s.A)({root:["root"]},p,e)})(d);return(0,y.jsx)(f,(0,n.A)({as:l,className:(0,i.A)(m.root,a),ownerState:d,ref:e},u))})},43243:(t,e,r)=>{r.d(e,{V0:()=>l,Yq:()=>a,fU:()=>i,go:()=>s,t6:()=>c});var n=r(82125),o=r(98920);function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM dd, yyyy";if(!t)return"\u2014";try{const r="string"===typeof t?(0,o.A)(t):t;return(0,n.A)(r,e)}catch(r){return console.error("Error formatting date:",r),String(t)}}function i(t){if(!t)return"\u2014";try{const e="string"===typeof t?(0,o.A)(t):t;return(0,n.A)(e,"h:mm a")}catch(e){return console.error("Error formatting time:",e),String(t)}}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;const n=function(t){if(!t)return null;try{const e="string"===typeof t?new Date(t):t,r=new Date;r.setHours(0,0,0,0),e.setHours(0,0,0,0);const n=e-r;return Math.ceil(n/864e5)}catch(e){return console.error("Error calculating days until expiry:",e),null}}(t);return null===n?{type:"unknown",color:"default",label:"No expiry date"}:n<0?{type:"expired",color:"error",label:"Expired",days:n}:n<=e?{type:"urgent",color:"error",label:"".concat(n," days left"),days:n}:n<=r?{type:"warning",color:"warning",label:"".concat(n," days left"),days:n}:{type:"ok",color:"success",label:"Good",days:n}}function l(t){return 0===t?{type:"out",color:"error",label:"Out of stock"}:t<=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)?{type:"low",color:"warning",label:"Low stock"}:{type:"ok",color:"success",label:"In stock"}}function c(t){const e=new Date;return e.setDate(e.getDate()-t),(0,n.A)(e,"yyyy-MM-dd")}},47805:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(59662),o=r(70579);const a=(0,n.A)((0,o.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")}}]);
//# sourceMappingURL=887.566dd91a.chunk.js.map